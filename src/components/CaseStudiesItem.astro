---
import { Image } from "astro:assets";
import type { ImageMetadata } from 'astro';

interface Props {
    title: string;
    imagePath: Array<string> | string;
};

const { title, imagePath } = Astro.props;

// const imgSrc = `/src/assets/images/${imagePath}`;
const images = import.meta.glob<{ default: ImageMetadata }>( "/src/assets/images/**/*.{jpg,jpeg,png}");
// if (!images[imgSrc]) throw new Error(`"${imgSrc}" not found in "/src/assets/images/"`);

const resolveImage = (path) => {
    const imgSrc = `/src/assets/images/${path}`;
    if (!images[imgSrc]) throw new Error(`"${imgSrc}" not found in "/src/assets/images/"`);
    return images[imgSrc]();
}

const imageArr = Array.isArray(imagePath) ? imagePath : [imagePath];
---

<div class="case-studies-item">
    <a href="/case-studies/acura-mdx">
        <div class="thumbnail">
            {imageArr.map((path) => (
                <Image 
                    src={resolveImage(path)}
                    alt="something"
                />
            ))}
        </div>
        <div class="meta">
            <div class="title">{title}</div>
        </div>
    </a>
</div>

<style>
    .case-studies-item a {
        text-decoration: none;
    }

    .thumbnail {
        /* border-radius: 0.8rem; */
        overflow: hidden;
        aspect-ratio: 1.5;
    }

    .thumbnail img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .title {
        margin-top: 1rem;
        font-size: 2.5rem;
        font-weight: 500;
    }
</style>