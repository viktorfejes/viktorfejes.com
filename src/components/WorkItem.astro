---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';


interface Props {
	title: string;
    imagePath: string;
    colSpan: number;
    rowSpan: number;
    href: string;
}

const { title, imagePath, colSpan, rowSpan, href } = Astro.props;

const imgSrc = `/src/assets/images/${imagePath}`;
const images = import.meta.glob<{ default: ImageMetadata }>( "/src/assets/images/**/*.{jpg,jpeg,png}");
if (!images[imgSrc]) throw new Error(`"${imgSrc}" not found in "/src/assets/images/"`);
---

<div class=`work-item`>
    <a href={href}>
        <div class="thumbnail">
            <Image
                src={images[imgSrc]()}
                alt=`${title} thumbnail`
                loading="lazy"
                widths={[240, 540, 720, 1300]}
                sizes={`(max-width: 639px) 240px, (max-width: 767px) 540px, (max-width: 1023px) 720px, 1300px`}
            />
        </div>
        <div class="title">
            <div class="title-inner">{title}</div>
        </div>
    </a>
</div>

<style>
    .work-item {
        position: relative;
        overflow: hidden;
        border-radius: 0.5rem;
        padding-bottom: 66.66%;
        background: #181823;
    }
    
    .col-span-4.row-span-2 {
        padding-bottom: 66.66%;
    }

    .col-span-2.row-span-4 {
        padding-bottom: 80%;
    }

    .col-span-4.row-span-4 {
        padding-bottom: 80%;
    }

    .title {
        position: absolute;
        width: 100%;
        top: 0; bottom: 0; left: 0; right: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "JetBrains Mono", monospace;
        font-size: 1.25rem;
        /* font-weight: 500; */
        opacity: 0;
        transform: translateY(1rem);
        transition: all 0.2s 0.1s;
    }

    .thumbnail {
        position: absolute;
        top: 0; bottom: 0; left: 0; right: 0;
        transform: scale(1.05);
        overflow: hidden;
        transition: all 0.1s ease-out;
    }

    .thumbnail img {
        width: 100%;
        height: 100%;
        display: block;
        object-fit: cover;
    }

    /* .work-item:hover,
    .work-item a:hover {
        cursor: none;
    } */

    .work-item:hover .title,
    .work-item a:active .title {
        transform: translateY(0);
        opacity: 1;
    }

    .work-item:hover .thumbnail,
    .work-item a:active .thumbnail {
        opacity: 0.8;
        filter: blur(20px);
    }
</style>