---
const { pathname } = Astro.url;
---
<Fragment>
<header class="fixed top-0 w-full h-32 z-30 flex place-content-center place-items-center mix-blend-difference">
    <nav class="w-full flex items-center justify-between px-4 md:px-8 max-w-8xl">
        <a href="/" class="block w-[1.875rem] text-neutral-50">
            <svg class="fill-current" viewBox="0 0 678 678">
                <path d="M607.241 139.965H239.288l99.324 198.647 81.211-162.423h169.306L338.612 677.223 0 0h677.223l-69.982 139.965z">
                </path>
            </svg>
        </a>
        <div class="w-full max-w-[66.66%] md:flex justify-between hidden">
            <ul class="flex justify-end gap-8 text-2xl">
                <li class="relative group">
                    <a href="/">Overview</a>
                    <div class=`transition duration-300 ease absolute block -bottom-1 w-full h-0.5 bg-slate-50 origin-left group-hover:scale-100 ${pathname === "/" ? "scale-100" : "scale-0"}`></div>
                </li>
                <li class="relative group">
                    <a href="/about">About me</a>
                    <div class=`transition duration-300 ease absolute block -bottom-1 w-full h-0.5 bg-slate-50 origin-left group-hover:scale-100 ${pathname.startsWith("/about") ? "scale-100" : "scale-0"}`></div>
                </li>
            </ul>
            <ul class="flex justify-end gap-8 text-2xl">
                <li class="relative group">
                    <a href="/blog">Blog</a>
                    <div class=`transition duration-300 ease absolute block -bottom-1 w-full h-0.5 bg-slate-50 origin-left group-hover:scale-100 ${pathname.startsWith("/blog") ? "scale-100" : "scale-0"}`></div>
                </li>
            </ul>
        </div>
    </nav>
</header>

<div class="md:hidden">
    <input class="hidden" type="checkbox" name="menu" id="menu">
    <label for="menu" class="group cursor-pointer select-none fixed top-12 right-4 z-40 mix-blend-difference">
        <div class="text-2xl relative">
            <div class="close-label hidden">Close</div>
            <div class="menu-label">Menu</div>
            <div class="transition duration-300 ease absolute block -bottom-1 w-full h-0.5 bg-slate-50 origin-left group-hover:scale-100 scale-0"></div>
        </div>
    </label>
    <div class="overlay-menu">
        <ul class="text-4xl pt-48 flex flex-col w-full">
            <!-- <li class="text-2xl opacity-50 mb-4">Menu</li> -->
            <li class="relative group border-y py-6 px-4 border-neutral-700">
                <a href="/" class="relative">
                    Overview
                </a>
            </li>
            <li class="relative group border-b py-6 px-4 border-neutral-700">
                <a href="/about" class="relative">
                    About me
                </a>
            </li>
            <li class="relative group border-b py-6 px-4 border-neutral-700">
                <a href="/blog" class="relative">
                    Blog
                </a>
            </li>
        </ul>
    </div>
</div>
</Fragment>

<style>
    .line {
        position: absolute;
        width: 1.8rem;
        height: 2px;
        transition: all 0.2s;
    }

    .line:nth-child(1) {
        transform: translateY(-0.45rem);
    }

    .line:nth-child(3) {
        transform: translateY(0.45rem);
    }

    #menu:checked + label .line:nth-child(2) {
        opacity: 0;
    }

    #menu:checked + label .line:nth-child(1) {
        transform: translateY(0) rotate(-45deg);
    }

    #menu:checked + label .line:nth-child(3) {
        transform: translateY(0) rotate(45deg);
    }

    .overlay-menu {
        position: fixed;
        inset: 0;
        display: none;
        background: var(--color-neutral-100);
        width: 100%;
        height: 100vh;
        z-index: 20;
    }

    #menu:checked ~ .overlay-menu {
        display: flex;
    }

    #menu:checked + label .close-label {
        display: block;
    }

    #menu:checked + label .menu-label {
        display: none;
    }
</style>
